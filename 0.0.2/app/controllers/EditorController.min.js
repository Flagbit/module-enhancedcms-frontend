define(["exports"],function(exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),EditorController=function(){function EditorController($rootScope,$scope,$element,$compile){_classCallCheck(this,EditorController),this.$rootScope=$rootScope,this.$scope=$scope,this.$compile=$compile,this.$scope.$element=$element,this.$scope._editorInstance=null,this.initEvents(),this.setElementEditable(),this.getEditorInstance()}return _createClass(EditorController,[{key:"setElementEditable",value:function(){this.$scope.$element.prop("contenteditable","true")}},{key:"initEvents",value:function(){var _this=this;this.$scope.$element[0].addEventListener("ngComponentViaCKEditor",function(e){_this.$compile(e.detail)(_this.$scope)}),this.$scope.$element.click(this.onClick.bind(this)),this.$scope.$on("remove",this.remove.bind(this))}},{key:"onClick",value:function(event){this.getEditorInstance()||(this.$scope._editorInstance=CKEDITOR.inline(event.currentTarget),this.initEditorEvents())}},{key:"getEditorInstance",value:function(){if(!this.$scope._editorInstance)for(var i in CKEDITOR.instances)if(CKEDITOR.instances.hasOwnProperty(i)&&this.$scope.$element.is(CKEDITOR.instances[i].element.$))return this.$scope._editorInstance=CKEDITOR.instances[i],this.initEditorEvents(),this.$scope._editorInstance;return this.$scope._editorInstance}},{key:"bindDebuggingEvents",value:function(editor){var eventList=["activeEnterModeChange","activeFilterChange","afterCommandExec","afterInsertHtml","afterPaste","afterPasteFromWord","afterSetData","afterUndoImage","ariaEditorHelpLabel","ariaWidget","autogrow","beforeCommandExec","beforeDestroy","beforeGetData","beforeModeUnload","beforeSetMode","beforeUndoImage","blur","change","configLoaded","contentDirChanged","contentDom","contentDomInvalidated","contentDomUnload","customConfigLoaded","dataFiltered","dataReady","destroy","dialogHide","dialogShow","dirChanged","doubleclick","dragend","dragstart","drop","elementsPathUpdate","fileUploadRequest","fileUploadResponse","floatingSpaceLayout","focus","getData","getSnapshot","insertElement","insertHtml","insertText","instanceReady","key","langLoaded","loadSnapshot","loaded","lockSnapshot","maximize","menuShow","mode","notificationHide","notificationShow","notificationUpdate","paste","pasteFromWord","pluginsLoaded","readOnly","removeFormatCleanup","required","resize","save","saveSnapshot","selectionChange","setData","stylesSet","template","toDataFormat","toHtml","unlockSnapshot","updateSnapshot","widgetDefinition"],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var event=_step.value;editor.on(event,function(){console.log("### "+event+" fired")})},_iterator=eventList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"initEditorEvents",value:function(){var editor=this.getEditorInstance();editor.on("focus",this.onFocus.bind(this)),editor.on("blur",this.onBlur.bind(this))}},{key:"onFocus",value:function(){this.$scope.$emit("hideToolbar")}},{key:"onBlur",value:function(){this.$scope.$emit("showToolbar")}},{key:"remove",value:function(event,mass){this.getEditorInstance()&&(this.getEditorInstance().destroy(),this.$scope._editorInstance=null)}}]),EditorController}();exports["default"]=EditorController});